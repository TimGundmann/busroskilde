<div class="container text-center">
    <div class="row">
        <div class="col-md-1 mr-auto ml-auto">
            <nav class="navbar bg-danger heading">
                <span class="navbar-brand">Turnus planer</span>
                <div *ngIf="isAdmin()">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a style="cursor: pointer;" class="nav-link" (click)="toggleAdd()">
                                <i class="nc-icon nc-simple-add" aria-hidden="true"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="col-md-11 mr-auto ml-auto">
            <div class="card no-transition" *ngIf="addVisible">
                <div class="card-header">
                    <h3>Tilføj Turnus plan</h3>
                </div>
                <div class="card-body">
                    <form class="form-rotation" [formGroup]="addForm" (ngSubmit)="add()">
                        <label>Overskrift</label>
                        <input type="text" class="form-control" placeholder="Overskrift" (focus)="focus=true"
                            (blur)="focus=false" name="headLine" formControlName="headLine" autofocus>
                        <div class="row">
                            <div class="col-md-6">
                                <label>Gyldig fra</label>
                                <input type="date" class="form-control" placeholder="Fra" (focus)="focus=true"
                                    (blur)="focus=false" name="from" formControlName="from">
                            </div>
                            <div class="col-md-6">
                                <label>Gyldig til</label>
                                <input type="date" class="form-control" placeholder="Til" (focus)="focus=true"
                                    (blur)="focus=false" name="to" formControlName="to">
                            </div>
                        </div>
                        <label>Fil</label>
                        <file-upload class="form-control" formControlName="pdf">
                            <ng-template #placeholder>
                                <span>Træk og slip eller tryk!</span>
                            </ng-template>
                        </file-upload>
                        <br />
                        <button type="submit" [disabled]="!addForm.valid"
                            class="btn btn-success btn-lg btn-fill">Tilføj</button>
                        <button type="button" class="btn btn-neutral btn-lg btn-fill btn-outline-neutral"
                            (click)="toggleAdd()">Annuller</button>
                    </form>
                </div>
            </div>
            <div *ngFor="let rotation of rotations">
                <div class="card no-transition">
                    <div class="card-body">
                        <div class="rotation-heading">
                            <span class="text-headline">{{rotation.headline}}</span>
                            <span>
                                <span class="text-info">Gyldighedsperiode: </span>
                                <span>{{rotation.from | date}}</span> - <span>{{rotation.to | date}}</span>
                            </span>
                            <span>
                                <a style="cursor: pointer;" (click)="togglePdf(rotation)">
                                    <i class="nc-icon nc-glasses-2" aria-hidden="true"></i>
                                </a>
                                <a style="cursor: pointer;" (click)="dowload(rotation)">
                                    <i class="nc-icon nc-cloud-download-93" aria-hidden="true"></i>
                                </a>
                                <a *ngIf="isAdmin()" style="cursor: pointer;" (click)="delete(rotation)">
                                    <i class="nc-icon nc-simple-remove" aria-hidden="true"></i>
                                </a>
                            </span>
                        </div>
                        <pdf-viewer *ngIf="showPdf(rotation)" [src]="rotation.file" [render-text]="true"
                            style="display: block;"></pdf-viewer>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>